
<!doctype html>
<html lang=en>
<head>
<script>document.addEventListener("keydown",(function(e){"F12"===e.key&&e.preventDefault(),e.ctrlKey&&"u"===e.key.toLowerCase()&&e.preventDefault(),e.ctrlKey&&e.shiftKey&&"i"===e.key.toLowerCase()&&e.preventDefault(),e.ctrlKey&&2===e.button&&e.preventDefault()})),document.addEventListener("mousedown",(function(e){e.ctrlKey&&2===e.button&&e.preventDefault()}))</script>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Flipkart Style Store</title>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css>
<link href="https://fonts.googleapis.com/css2?family=Outfit&display=swap" rel=stylesheet>
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css rel=stylesheet>
<link href=https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css rel=stylesheet>
<link href=https://unpkg.com/aos@2.3.1/dist/aos.css rel=stylesheet>
<style>:root{--flipkart-blue:#2874f0;--flipkart-yellow:#ffe500;--flipkart-dark:#172337;--flipkart-light:#f1f3f6}body{font-family:Outfit,sans-serif;background-color:var(--flipkart-light);color:#212121}.header{background-color:var(--flipkart-blue);color:#fff;padding:10px 0;position:sticky;top:0;z-index:1000;box-shadow:0 1px 3px rgba(0,0,0,.1)}.logo{font-weight:700;font-size:24px;color:#fff;text-decoration:none;display:flex;align-items:center}.logo span{color:var(--flipkart-yellow);font-style:italic;margin-left:2px}.search-container{display:flex;margin:0 15px}.search-input{width:100%;padding:10px 15px;border:none;border-radius:2px 0 0 2px;outline:0;font-size:14px}.search-btn{background-color:#fff;border:none;border-radius:0 2px 2px 0;padding:0 20px;cursor:pointer;color:var(--flipkart-blue);font-weight:500}.user-actions{display:flex;align-items:center;gap:20px}.action-btn{color:#fff;text-decoration:none;font-weight:500;font-size:16px;display:flex;flex-direction:column;align-items:center}.action-btn i{font-size:20px}.container{padding-top:20px;padding-bottom:50px}.page-title{font-size:24px;font-weight:500;margin-bottom:20px;color:var(--flipkart-dark)}.product-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:30px}@media (min-width:768px){.product-grid{grid-template-columns:repeat(4,1fr)}}@media (min-width:992px){.product-grid{grid-template-columns:repeat(5,1fr)}}.product-card{background:#fff;border-radius:8px;overflow:hidden;transition:transform .3s,box-shadow .3s;box-shadow:0 1px 2px 0 rgba(0,0,0,.1);position:relative}.product-card:hover{transform:translateY(-5px);box-shadow:0 4px 8px 0 rgba(0,0,0,.2)}.product-img-container{height:180px;display:flex;align-items:center;justify-content:center;padding:10px;border-bottom:1px solid #f0f0f0}.product-img{max-height:100%;max-width:100%;object-fit:contain}.product-body{padding:15px}.product-title{font-size:14px;font-weight:500;margin-bottom:8px;height:40px;overflow:hidden;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;color:#212121}.product-price{font-size:16px;font-weight:700;color:#388e3c;margin-bottom:8px}.original-price{font-size:14px;color:#878787;text-decoration:line-through;margin-right:8px}.discount{font-size:13px;color:#388e3c}.product-rating{background-color:#388e3c;color:#fff;font-size:12px;padding:2px 4px;border-radius:3px;display:inline-flex;align-items:center;margin-bottom:8px}.product-rating i{font-size:10px;margin-left:2px}.product-stock{font-size:12px;color:#878787;margin-bottom:10px}.add-to-cart{width:auto;border-radius:6px;font-weight:500;background-color:var(--flipkart-blue);border:none;padding:6px 16px;color:#fff;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:6px;font-size:14px;margin:0 auto;transition:background-color .3s ease,transform .2s ease}.add-to-cart:disabled{background-color:#ccc;cursor:not-allowed}.favorite-btn{position:absolute;top:10px;right:10px;background:rgba(255,255,255,.6);border:none;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:1;box-shadow:0 1px 3px rgba(0,0,0,.2)}.favorite-btn i{font-size:16px;color:#000}.favorite-btn.active i{color:#d32f2f}.cart-icon,.favorite-icon{position:fixed;top:65px;z-index:1000;background:#fff;border-radius:50%;width:30px;height:30px;display:flex;align-items:center;justify-content:center;box-shadow:0 2px 10px rgba(0,0,0,.1);cursor:pointer}.cart-icon{left:20px}.favorite-icon{left:80px}.cart-badge,.favorite-badge{position:absolute;top:-5px;right:-5px;background:#d32f2f;color:#fff;border-radius:50%;width:20px;height:20px;font-size:12px;display:flex;align-items:center;justify-content:center}.cart-sidebar,.favorites-sidebar{position:fixed;top:0;right:-400px;width:350px;height:88vh;background:#fff;box-shadow:-2px 0 10px rgba(0,0,0,.1);z-index:1100;transition:right .3s;padding:20px;overflow-y:auto}.cart-sidebar.active,.favorites-sidebar.active{right:0}.cart-overlay,.favorites-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5);z-index:998;display:none}.cart-overlay.active,.favorites-overlay.active{display:block}.close-cart,.close-favorites{position:absolute;top:15px;right:15px;font-size:24px;cursor:pointer;color:#878787}.loading-spinner{display:none;text-align:center;padding:40px}.toast-notification{position:fixed;bottom:14%;right:18px;background-color:#333;color:#fff;padding:6px 12px;border-radius:4px;box-shadow:0 2px 10px rgba(0,0,0,.2);z-index:1100;display:flex;align-items:center;gap:10px;font-size:13px}.toast-notification.success{background-color:#388e3c}.toast-notification.danger{background-color:#d32f2f}@media (max-width:768px){.header{padding:10px 0}.logo{font-size:20px}.search-container{margin:10px 0}.user-actions{gap:10px}.action-btn{font-size:12px}.action-btn i{font-size:16px}}.loader{width:100vw;height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#fff;position:fixed;top:0;left:0;z-index:9999;animation:loader 1s ease-in-out 1}@keyframes loader{0%{transform:translateX(-100%)}}.truckWrapper{width:200px;height:100px;display:flex;flex-direction:column;position:relative;align-items:center;justify-content:flex-end;overflow-x:hidden;transform:scale(1.5)}.truckBody{width:130px;height:fit-content;margin-bottom:6px;animation:motion 1s linear infinite}@keyframes motion{0%{transform:translateY(0)}50%{transform:translateY(3px)}100%{transform:translateY(0)}}.truckTires{width:130px;height:fit-content;display:flex;align-items:center;justify-content:space-between;padding:0 10px 0 15px;position:absolute;bottom:0}.truckTires svg{width:24px}.road{width:100%;height:1.5px;background-color:#282828;position:relative;bottom:0;align-self:flex-end;border-radius:3px}.road::before{content:"";position:absolute;width:20px;height:100%;background-color:#282828;right:-50%;border-radius:3px;animation:roadAnimation 1.4s linear infinite;border-left:10px solid #fff}.road::after{content:"";position:absolute;width:10px;height:100%;background-color:#282828;right:-65%;border-radius:3px;animation:roadAnimation 1.4s linear infinite;border-left:4px solid #fff}.lampPost{position:absolute;bottom:0;right:-90%;height:90px;animation:roadAnimation 1.4s linear infinite}@keyframes roadAnimation{0%{transform:translateX(0)}100%{transform:translateX(-350px)}}.text-loader{font-size:1.4rem;font-weight:600;margin-bottom:10px;color:#333;font-family:"Segoe UI",sans-serif;animation:fadeText 1.5s ease-in-out infinite}@keyframes fadeText{0%{opacity:.3}50%{opacity:1}100%{opacity:.3}}.swal2-container{display:flex;justify-content:center;align-items:center;height:100vh;width:100%}.swal2-popup.custom-swal{width:400px;max-width:90%;height:auto;max-height:500px;padding:5px;box-sizing:border-box;display:flex;flex-direction:column;justify-content:space-between;align-items:center;text-align:center;overflow:hidden;border-radius:10px;background-color:#fff;box-shadow:0 6px 12px rgba(0,0,0,.2);margin-bottom:15%}.swal2-title{font-size:18px;margin-bottom:10px;line-height:1.4;text-align:center}.swal2-html-container{font-size:14px;line-height:1.6;margin-bottom:12px;text-align:center;word-wrap:break-word;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:5;-webkit-box-orient:vertical}.swal2-footer{font-size:12px;margin-top:auto;text-align:center}.swal2-footer a{text-decoration:none;color:#007bff;font-weight:600;font-size:12px}.swal2-actions{display:flex;gap:10px;margin-top:12px}.swal2-actions button{font-size:14px;padding:8px 15px;border:none;border-radius:6px;cursor:pointer}.swal2-actions button:first-child{background-color:#007bff;color:#fff}.swal2-actions button:last-child{background-color:#ccc;color:#000}</style>
</head>
<body>
<script src=https://cdn.jsdelivr.net/npm/sweetalert2@11></script>
<script src=https://unpkg.com/aos@2.3.1/dist/aos.js></script>
<script>AOS.init()</script>
<div class=loader id=loadertruck style=display:none>
<small class="text-center p-2" style=color:#524d4d data-aos=slide-right data-aos-duration=1000 data-aos-delay=900>Please wait while we process your order. This may take 1 to 4 minutes. Do not click the back button.</small>
<div class=text-loader data-aos=slide-right data-aos-duration=1000 data-aos-delay=900><span class="text text-secondary p-2 text-small bold" style=font-size:16px data-aos=slide-left data-aos-duration=1000 data-aos-delay=200>Placing your order.</span> </div>
<div class=truckWrapper>
<div class=truckBody>
<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 198 93" class=trucksvg data-aos=slide-right data-aos-duration=1000 data-aos-delay=900>
<path stroke-width=3 stroke=#282828 fill=#F83D3D data-aos=slide-right data-aos-duration=1000 data-aos-delay=900 d="M135 22.5H177.264C178.295 22.5 179.22 23.133 179.594 24.0939L192.33 56.8443C192.442 57.1332 192.5 57.4404 192.5 57.7504V89C192.5 90.3807 191.381 91.5 190 91.5H135C133.619 91.5 132.5 90.3807 132.5 89V25C132.5 23.6193 133.619 22.5 135 22.5Z"></path>
<path stroke-width=3 stroke=#282828 fill=#7D7C7C data-aos=slide-right data-aos-duration=1000 data-aos-delay=900 d="M146 33.5H181.741C182.779 33.5 183.709 34.1415 184.078 35.112L190.538 52.112C191.16 53.748 189.951 55.5 188.201 55.5H146C144.619 55.5 143.5 54.3807 143.5 53V36C143.5 34.6193 144.619 33.5 146 33.5Z"></path>
<path stroke-width=2 stroke=#282828 fill=#282828 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900 d="M150 65C150 65.39 149.763 65.8656 149.127 66.2893C148.499 66.7083 147.573 67 146.5 67C145.427 67 144.501 66.7083 143.873 66.2893C143.237 65.8656 143 65.39 143 65C143 64.61 143.237 64.1344 143.873 63.7107C144.501 63.2917 145.427 63 146.5 63C147.573 63 148.499 63.2917 149.127 63.7107C149.763 64.1344 150 64.61 150 65Z"></path>
<rect stroke-width=2 stroke=#282828 fill=#FFFCAB rx=1 height=7 width=5 y=63 x=187 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></rect>
<rect stroke-width=2 stroke=#282828 fill=#282828 rx=1 height=11 width=4 y=81 x=193 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></rect>
<rect stroke-width=3 stroke=#282828 fill=#DFDFDF rx=2.5 height=90 width=121 y=1.5 x=6.5 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></rect>
<rect stroke-width=2 stroke=#282828 fill=#DFDFDF rx=2 height=4 width=6 y=84 x=1 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></rect>
</svg>
</div>
<div class=truckTires data-aos=slide-right data-aos-duration=1000 data-aos-delay=200>
<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 30 30" class=tiresvg data-aos=slide-right data-aos-duration=1000 data-aos-delay=900>
<circle stroke-width=3 stroke=#282828 fill=#282828 r=13.5 cy=15 cx=15 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></circle>
<circle fill=#DFDFDF r=7 cy=15 cx=15 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></circle>
</svg>
<svg xmlns=http://www.w3.org/2000/svg fill=none viewBox="0 0 30 30" class=tiresvg data-aos=slide-right data-aos-duration=1000 data-aos-delay=900>
<circle stroke-width=3 stroke=#282828 fill=#282828 r=13.5 cy=15 cx=15 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></circle>
<circle fill=#DFDFDF r=7 cy=15 cx=15 data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></circle>
</svg>
</div>
<div class=road data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></div>
<svg xml:space=preserve viewBox="0 0 453.459 453.459" xmlns:xlink=http://www.w3.org/1999/xlink xmlns=http://www.w3.org/2000/svg id=Capa_1 version=1.1 fill=#000000 class=lampPost data-aos=slide-right data-aos-duration=1000 data-aos-delay=900>
<path d="M252.882,0c-37.781,0-68.686,29.953-70.245,67.358h-6.917v8.954c-26.109,2.163-45.463,10.011-45.463,19.366h9.993
c-1.65,5.146-2.507,10.54-2.507,16.017c0,28.956,23.558,52.514,52.514,52.514c28.956,0,52.514-23.558,52.514-52.514
c0-5.478-0.856-10.872-2.506-16.017h9.992c0-9.354-19.352-17.204-45.463-19.366v-8.954h-6.149C200.189,38.779,223.924,16,252.882,16
c29.952,0,54.32,24.368,54.32,54.32c0,28.774-11.078,37.009-25.105,47.437c-17.444,12.968-37.216,27.667-37.216,78.884v113.914
h-0.797c-5.068,0-9.174,4.108-9.174,9.177c0,2.844,1.293,5.383,3.321,7.066c-3.432,27.933-26.851,95.744-8.226,115.459v11.202h45.75
v-11.202c18.625-19.715-4.794-87.527-8.227-115.459c2.029-1.683,3.322-4.223,3.322-7.066c0-5.068-4.107-9.177-9.176-9.177h-0.795
V196.641c0-43.174,14.942-54.283,30.762-66.043c14.793-10.997,31.559-23.461,31.559-60.277C323.202,31.545,291.656,0,252.882,0z
M232.77,111.694c0,23.442-19.071,42.514-42.514,42.514c-23.442,0-42.514-19.072-42.514-42.514c0-5.531,1.078-10.957,3.141-16.017
h78.747C231.693,100.736,232.77,106.162,232.77,111.694z" data-aos=slide-right data-aos-duration=1000 data-aos-delay=900></path>
</svg>
</div>
</div>
<header class="bg-white shadow-sm sticky-top" style="padding:4px 8px;z-index:1020">
<div class="container-fluid d-flex align-items-center justify-content-between flex-nowrap gap-2">
<div class="d-flex align-items-center flex-grow-1 gap-1">
<div class=input-group style=max-width:500px;width:100%>
<span class="input-group-text bg-white border-end-0 py-1 px-2">
<i class="bi bi-search text-muted" style=font-size:14px></i>
</span>
<input id=searchInput class="form-control form-control-sm border-start-0 py-1" placeholder="Search for products, brands and more" style="box-shadow:none;outline:0;font-size:14px;border:1px solid #e4dede">
</div>
<div class="d-flex justify-content-end p-1">
<button id=buyBtn class="btn btn-sm btn-outline-success rounded-pill shadow-sm d-flex align-items-center gap-1 px-3" onclick=toggleCart()>
<i class="bi bi-cart-fill"></i> Buy
</button>
</div>
<button class="btn btn-outline-secondary btn-sm" id=searchBtn style=display:none>
<i class="bi bi-search"></i>
</button>
</div>
</div>
</header>
<div class=container data-aos=fade-up>
<h1 class="page-title text-end">All Products</h1>
<div class="mb-3 d-flex justify-content-end gap-2">
<select id=categoryFilter class="form-select form-select-sm" style=max-width:200px>
<option value=all selected>All Categories</option>
<option value=oils>Oils</option>
<option value=gulab>Biscuit</option>
</select>
<select id=offerFilter class="form-select form-select-sm" style=max-width:200px>
<option value=all selected>All Offers</option>
<option value=0-10>0% - 10%</option>
<option value=11-20>11% - 20%</option>
<option value=21-30>21% - 30%</option>
<option value=31-above>31% and above</option>
</select>
</div>
<div id=loadingSpinner class=loading-spinner data-aos=fade-left>
<div class="spinner-border text-primary" role=status>
<span class=visually-hidden>Loading...</span>
</div>
<p>Loading products...</p>
</div>
<div id=products class=product-grid></div>
</div>
<div class=cart-icon id=cartIcon>
<i class="bi bi-cart3" style=font-size:24px></i>
<div class=cart-badge id=cartBadge>0</div>
</div>
<div class=favorite-icon id=favoriteIcon>
<i class="bi bi-heart" style=font-size:24px></i>
<div class=favorite-badge id=favoriteBadge>0</div>
</div>
<div class=cart-overlay id=cartOverlay></div>
<div class=cart-sidebar id=cartSidebar>
<i class="bi bi-x-lg close-cart" id=closeCart></i>
<h2 class=mb-4><i class="bi bi-cart-check-fill"></i> Your Cart</h2>
<div id=cartItems class=mb-3></div>
<div class="border-top pt-3">
<div class="d-flex justify-content-between align-items-center mb-3">
<h4 class=mb-0>Total:</h4>
<h4 class=mb-0 id=cartTotal>₹0</h4>
</div>
<div class=mb-3>
<label for=delivery-time class=form-label>Expected Delivery Time:</label>
<input type=datetime-local id=delivery-time required class=form-control onfocus="this.min=(new Date).toISOString().slice(0,16)" onchange='new Date(this.value)<new Date&&(this.value="",alert("Please select a time that is after the current time."))'>
</div>
<button id=place-order class="btn btn-success w-100 py-2">
<i class="bi bi-box-arrow-in-right"></i> Place Order
</button>
</div>
</div>
<div class=favorites-overlay id=favoritesOverlay></div>
<div class=favorites-sidebar id=favoritesSidebar>
<i class="bi bi-x-lg close-favorites" id=closeFavorites></i>
<h2 class=mb-4><i class="bi bi-heart-fill"></i> Your Favorites</h2>
<div id=favoriteItems class=mb-3></div>
<div class="border-top pt-3">
<button id=clear-favorites class="btn btn-danger w-100 py-2">
<i class="bi bi-trash"></i> Clear All Favorites
</button>
</div>
</div>
<button onclick='window.scrollTo({top:0,behavior:"smooth"})' id=goTopBtn style="position:fixed;bottom:80px;right:30px;width:48px;height:48px;border:none;border-radius:50%;background-color:#3d3f42;color:#fff;box-shadow:0 4px 12px rgba(0,0,0,.2);display:none;justify-content:center;align-items:center;z-index:1000;cursor:pointer;transition:background-color .3s ease,transform .3s ease" onmouseover='this.style.backgroundColor="#3d3f42",this.style.transform="scale(1.05)"' onmouseout='this.style.backgroundColor="#3d3f42",this.style.transform="scale(1)"' title="Go to Top">
<svg xmlns=http://www.w3.org/2000/svg width=22 height=22 fill=white viewBox="0 0 16 16">
<path fill-rule=evenodd d="M8 3.293l3.646 3.647-.708.708L8 4.707 5.061 7.648l-.708-.708L8 3.293z"/>
<path fill-rule=evenodd d="M8 4v8h1V4H8z"/>
</svg>
</button>
<script>function placeOrder(){Swal.fire({title:"Order Placed!",html:'\n  Once Your order is packed, and we’ve sent you an email confirmation.<br>\n  Please check:<br>\n  - Your <strong>email Inbox or Spam</strong><br>\n  - Or in <strong>"My Orders"</strong> on our website.\n  ',icon:"success",confirmButtonText:"Okay",footer:'<a href="https://easanmart.netlify.app/easan_csts">View My Orders</a>',showClass:{popup:"animate__animated animate__fadeIn"},hideClass:{popup:"animate__animated animate__fadeOut"},customClass:{popup:"custom-swal"}})}window.onscroll=function(){document.getElementById("goTopBtn").style.display=document.body.scrollTop>100||document.documentElement.scrollTop>100?"block":"none"};let cart=[],allProducts=[],filteredProducts=[],favorites=JSON.parse(localStorage.getItem("favorites"))||[];const productsPerPage=50;let currentPage=1,isLoading=!1;const customerId=localStorage.getItem("customer_id"),customerName=localStorage.getItem("customer_name"),customerNo=localStorage.getItem("customer_no"),customeremil=localStorage.getItem("customer_mail");function toggleCart(){document.getElementById("cartSidebar").classList.toggle("active"),document.getElementById("cartOverlay").classList.toggle("active")}function toggleFavorites(){document.getElementById("favoritesSidebar").classList.toggle("active"),document.getElementById("favoritesOverlay").classList.toggle("active"),document.getElementById("favoritesSidebar").classList.contains("active")&&renderFavorites()}function fetchProducts(){showLoading(!0),fetch("https://script.google.com/macros/s/AKfycbx0803x6J7qcKDX5zoNJX6shyWAoXCCPkDl7WzjZYBpqbE_EzCgI4TwZ3jIc4GUHhYzpA/exec?action=getProducts").then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>{allProducts=e,filteredProducts=[...allProducts],renderProducts(filteredProducts.slice(0,50)),showLoading(!1)})).catch((e=>{console.error("Error fetching products:",e),document.getElementById("products").innerHTML='<p class="text-center col-12">Failed to load products. Please try again later.</p>',showLoading(!1)}))}function filterProducts(e){const t=e.toLowerCase().trim().replace(/\s+/g,"_"),n=document.getElementById("categoryFilter").value,o=document.getElementById("offerFilter").value;filteredProducts=allProducts.filter((e=>{const a=""===t||e.name.toLowerCase().includes(t)||e.id&&e.id.toString().toLowerCase().includes(t)||e.our_price&&e.price.toString().includes(t),r=function(e){const t=e.toLowerCase();return t.includes("oil")?"oils":t.includes("bisc")?"gulab":"other"}(e.name),s="all"===n||r===n,i=Math.round((e.our_price-e.price)/-e.price*100);let c=!0;return"all"!==o&&("0-10"===o?c=i>=0&&i<=10:"11-20"===o?c=i>=11&&i<=20:"21-30"===o?c=i>=21&&i<=30:"31-above"===o&&(c=i>=31)),a&&s&&c})),currentPage=1,renderProducts(filteredProducts.slice(0,50))}function loadMoreProducts(){if(isLoading)return;const e=50*currentPage,t=e+50;e>=filteredProducts.length||(isLoading=!0,setTimeout((()=>{renderProducts(filteredProducts.slice(e,t),!0),currentPage++,isLoading=!1}),300))}function renderProducts(e,t=!1){const n=document.getElementById("products");t||(n.innerHTML=""),0!==e.length?e.forEach((e=>{const t=favorites.some((t=>t.id===e.id)),o=document.createElement("div");o.className="product-card";const a=Math.round((e.our_price-e.price)/-e.price*100),r=e.name.replace(/_/g," ");o.innerHTML=`\n          <div class="product-card">\n            <button class="favorite-btn ${t?"active":""}" onclick="toggleFavorite('${e.id}', '${e.name.replace(/'/g,"\\'")}', ${e.our_price}, '${e.img_url||"https://via.placeholder.com/150"}', this)">\n              <i class="bi ${t?"bi-heart-fill":"bi-heart"}"></i>\n            </button>\n            <div class="product-img-container">\n              <img src="${e.img_url||"https://via.placeholder.com/150"}" class="product-img" alt="${e.name}" loading="lazy">\n            </div>\n            <div class="product-body">\n              <h5 class="product-title">${r}</h5>\n              <div class="product-rating">\n                ${(1*Math.random()+4).toFixed(1)} <i class="bi bi-star-fill"></i>\n              </div>\n              <div class="product-price">\n                <span class="original-price">₹${e.price}</span>\n                <span>₹${e.our_price}</span>\n                <span class="discount">${a}% off</span>\n              </div>\n              <div class="product-stock">\n                ${e.stock>0?'<span class="badge bg-success">In Stock</span>':'<span class="badge bg-danger">Out of Stock</span>'}\n              </div>\n              <button class="add-to-cart" \n                onclick="addToCart('${e.id}', '${e.name.replace(/'/g,"\\'")}', ${e.our_price}, ${e.stock})"\n                ${e.stock<=0?"disabled":""}>\n                <i class="bi bi-cart-plus"></i> ADD TO CART\n              </button>\n            </div>\n          </div>\n        `,n.appendChild(o)})):n.innerHTML='<p class="text-center col-12">No products found.</p>'}function toggleFavorite(e,t,n,o,a){const r=favorites.findIndex((t=>t.id===e));if(-1===r?(favorites.push({id:e,name:t,price:n,image:o}),showToast(`${t} added to favorites!`,"success")):(favorites.splice(r,1),showToast(`${t} removed from favorites!`,"danger")),localStorage.setItem("favorites",JSON.stringify(favorites)),a){a.classList.toggle("active");const e=a.querySelector("i");e.classList.toggle("bi-heart"),e.classList.toggle("bi-heart-fill")}updateFavoriteBadge(),document.getElementById("favoritesSidebar").classList.contains("active")&&renderFavorites()}function renderFavorites(){const e=document.getElementById("favoriteItems");0!==favorites.length?(e.innerHTML="",favorites.forEach(((t,n)=>{const o=document.createElement("div");o.className="favorite-item mb-3 pb-3 border-bottom",o.innerHTML=`\n          <div class="d-flex align-items-center">\n            <img src="${t.image}" style="width: 60px; height: 60px; object-fit: contain; margin-right: 10px;" alt="${t.name}">\n            <div style="flex-grow: 1;">\n              <h6 class="mb-1">${t.name}</h6>\n              <div class="product-price text-danger fw-bold mb-2">₹${t.price}</div>\n            </div>\n            <div class="d-flex">\n              <button class="btn btn-sm btn-primary me-2" onclick="addToCart('${t.id}', '${t.name.replace(/'/g,"\\'")}', ${t.price}, 100)">\n                <i class="bi bi-cart-plus"></i>\n              </button>\n              <button class="btn btn-sm btn-outline-danger" onclick="removeFromFavorites('${t.id}')">\n                <i class="bi bi-trash"></i>\n              </button>\n            </div>\n          </div>\n        `,e.appendChild(o)}))):e.innerHTML='<p class="text-center text-muted">Your favorites list is empty</p>'}function removeFromFavorites(e){const t=favorites.findIndex((t=>t.id===e));if(-1!==t){showToast(`${favorites.splice(t,1)[0].name} removed from favorites!`,"danger"),localStorage.setItem("favorites",JSON.stringify(favorites));const n=document.querySelector(`.favorite-btn[onclick*="${e}"]`);if(n){n.classList.remove("active");const e=n.querySelector("i");e.classList.remove("bi-heart-fill"),e.classList.add("bi-heart")}updateFavoriteBadge(),renderFavorites()}}function clearFavorites(){0!==favorites.length&&confirm("Are you sure you want to clear all favorites?")&&(favorites=[],localStorage.setItem("favorites",JSON.stringify(favorites)),document.querySelectorAll(".favorite-btn").forEach((e=>{e.classList.remove("active");const t=e.querySelector("i");t.classList.remove("bi-heart-fill"),t.classList.add("bi-heart")})),updateFavoriteBadge(),renderFavorites(),showToast("All favorites cleared!","danger"))}function updateFavoriteBadge(){document.getElementById("favoriteBadge").textContent=favorites.length}function addToCart(e,t,n,o){const a=cart.find((t=>t.id===e));if(a){if(a.quantity>=o)return void alert(`Only ${o} items available in stock!`);a.quantity+=1}else cart.push({id:e,name:t,price:n,quantity:1,stock:o});const r=document.getElementById("buyBtn");r&&(r.classList.remove("btn-outline-success"),r.classList.add("btn-success")),updateCart(),showToast(`${t} added to cart!`,"success")}function updateCart(){const e=document.getElementById("cartItems"),t=document.getElementById("cartTotal"),n=document.getElementById("cartBadge");e.innerHTML="";let o=0,a=0;const r=document.createElement("ol");r.className="list-unstyled",cart.forEach(((e,t)=>{const n=e.price*e.quantity;o+=n,a+=e.quantity;const s=document.createElement("li");s.className="cart-item mb-3 pb-3 border-bottom",s.innerHTML=`\n      <div class="d-flex justify-content-between">\n        <h6 class="mb-1">${t+1}. ${e.name}</h6>\n        <span class="remove-item" onclick="removeFromCart(${t})">\n          <i class="bi bi-trash"></i>\n        </span>\n      </div>\n      <div class="d-flex justify-content-between align-items-center">\n        <div class="quantity-control">\n          <span class="quantity-btn" onclick="updateQuantity(${t}, -1)">-</span>\n          <span>${e.quantity}</span>\n          <span class="quantity-btn" onclick="updateQuantity(${t}, 1)">+</span>\n        </div>\n        <span class="fw-bold">₹${n.toFixed(2)}</span>\n      </div>\n      ${e.quantity>=e.stock?'<div class="stock-warning">Maximum available quantity added</div>':""}\n      <div class="text-muted small">₹${e.price} per item</div>\n    `,r.appendChild(s)})),e.appendChild(r),t.textContent=`₹${o.toFixed(2)}`,n.textContent=a,0===cart.length&&(e.innerHTML='<p class="text-center text-muted">Your cart is empty</p>')}function updateQuantity(e,t){const n=cart[e],o=n.quantity+t;o<1?removeFromCart(e):o>n.stock?showToast(`Only ${n.stock} items available in stock!`,"danger"):(n.quantity=o,updateCart())}function removeFromCart(e){const t=cart.splice(e,1)[0];updateCart(),showToast(`${t.name} removed from cart`,"danger")}function showLoading(e){document.getElementById("loadingSpinner").style.display=e?"block":"none"}function showToast(e,t="success"){const n=document.createElement("div");n.className=`toast-notification ${t}`,n.innerHTML=`\n        <i class="bi ${"success"===t?"bi-check-circle":"bi-exclamation-triangle"}"></i>\n        <span>${e}</span>\n      `;document.querySelectorAll(".toast-notification").forEach((e=>e.remove())),document.body.appendChild(n),setTimeout((()=>{n.remove()}),3e3)}customerId||(window.location.href="https://easanmart.netlify.app/easan_login.html"),document.addEventListener("DOMContentLoaded",(function(){fetchProducts(),AOS.init({duration:800,once:!0}),document.getElementById("searchInput").addEventListener("input",(function(){filterProducts(this.value)})),document.getElementById("searchBtn").addEventListener("click",(function(){filterProducts(document.getElementById("searchInput").value)})),document.getElementById("categoryFilter").addEventListener("change",(function(){filterProducts(document.getElementById("searchInput").value)})),document.getElementById("offerFilter").addEventListener("change",(function(){filterProducts(document.getElementById("searchInput").value)})),window.addEventListener("scroll",(function(){window.innerHeight+window.scrollY>=document.body.offsetHeight-500&&!isLoading&&loadMoreProducts()})),document.getElementById("cartIcon").addEventListener("click",toggleCart),document.getElementById("cartOverlay").addEventListener("click",toggleCart),document.getElementById("closeCart").addEventListener("click",toggleCart),document.getElementById("favoriteIcon").addEventListener("click",toggleFavorites),document.getElementById("favoritesOverlay").addEventListener("click",toggleFavorites),document.getElementById("closeFavorites").addEventListener("click",toggleFavorites),document.getElementById("clear-favorites").addEventListener("click",clearFavorites),updateFavoriteBadge()})),document.getElementById("place-order").addEventListener("click",(async()=>{const e=document.getElementById("delivery-time").value;if(!e)return showToast("Please select an expected delivery time.","danger");if(!cart.length)return showToast("Your cart is empty. Please add some products.","danger");const t=cart.reduce(((e,t)=>e+t.quantity),0),n=(cart.reduce(((e,t)=>e+t.price*t.quantity),0),"ORD"+Math.floor(1e5*Math.random())),o=(t,n,o,a)=>({order_id:a,customer_id:customerId,items:JSON.stringify(t),quantity:n,total:o,status:"Pending",delivery_time:e,customer_name:customerName,customer_no:customerNo,customer_email:customeremil});document.getElementById("loadertruck").style.display="flex",showToast(t>160?"Be patient. Splitting your order into batches...":"Be patient. Placing your order...","success"),sessionStorage.setItem("placing_order","true");try{let e=[];if(t>500){alert("Please wait...\nWe are handling your order smoothly.\nSplitting into batches may take 3-5 minutes...");const t=350;let n=[],o=0;cart.forEach((a=>{const r=t-o;if(a.quantity>r){const t={...a,quantity:r};n.push(t),e.push(n),n=[{...a,quantity:a.quantity-r}],o=a.quantity-r}else n.push(a),o+=a.quantity;o===t&&(e.push(n),n=[],o=0)})),n.length>0&&e.push(n)}else e.push(cart);for(let t=0;t<e.length;t++){const a=e[t],r=a.reduce(((e,t)=>e+t.quantity),0),s=a.reduce(((e,t)=>e+t.price*t.quantity),0),i=n.slice(0,3)+(parseInt(n.slice(3))+t),c=o(a.map((e=>({id:e.id,quantity:e.quantity}))),r,s,i),d=await fetch("https://script.google.com/macros/s/AKfycbx0803x6J7qcKDX5zoNJX6shyWAoXCCPkDl7WzjZYBpqbE_EzCgI4TwZ3jIc4GUHhYzpA/exec?action=createOrder",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(c)});if(!(await d.json()).success)throw new Error(`Failed to place batch ${t+1} of ${e.length}.`)}cart=[],updateCart(),toggleCart(),document.getElementById("loadertruck").style.display="none",sessionStorage.removeItem("placing_order"),placeOrder()}catch(e){document.getElementById("loadertruck").style.display="none",console.error("Order Error:",e),showToast("Error placing order. Please try again later.","danger"),setTimeout((()=>{location.reload()}),2e3)}}))</script>
</body>
</html>
