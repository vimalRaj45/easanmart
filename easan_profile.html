<!doctype html>
<html lang=en>
<head>
<script>document.addEventListener("contextmenu",(function(e){e.preventDefault()})),document.addEventListener("keydown",(function(e){"F12"===e.key&&e.preventDefault(),e.ctrlKey&&"u"===e.key.toLowerCase()&&(alert("Please contact me! : 8807099288"),e.preventDefault()),e.ctrlKey&&e.shiftKey&&"i"===e.key.toLowerCase()&&e.preventDefault(),e.ctrlKey&&2===e.button&&e.preventDefault()})),document.addEventListener("mousedown",(function(e){e.ctrlKey&&2===e.button&&e.preventDefault()}))</script>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>User Profile | Easan Grocery</title>
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css rel=stylesheet>
<link href=https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css rel=stylesheet>
<link href=https://unpkg.com/aos@2.3.4/dist/aos.css rel=stylesheet>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600&display=swap" rel=stylesheet>
<style>body{font-family:Outfit,sans-serif;background:#f2f2f2;color:#333}.profile-container{max-width:500px;margin:60px auto;background:#fff;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.1);padding:30px;text-align:center}.profile-info img{width:120px;height:120px;border-radius:50%;object-fit:cover;margin-bottom:15px;border:3px solid #007bff}.profile-info h4{font-weight:600;margin-bottom:5px}.logout-btn{margin-top:20px;background:#ff4d4d;border:none;color:#fff;padding:10px 20px;border-radius:12px;transition:.3s ease}.logout-btn:hover{background:#e60000}.alert{text-align:left}</style>
</head>
<body>
<div class="container profile-container" data-aos=fade-up>
<div class=profile-info>
<img id=profile-picture src=https://via.placeholder.com/150 alt="Profile Picture">
<h4 id=profile-name>Loading...</h4>
<p id=profile-email>Email: Loading...</p>
<p id=profile-contact>Contact: Loading...</p>
</div>
<div id=loader class="text-center my-3">
<div class="spinner-border text-primary" role=status>
<span class=visually-hidden>Loading...</span>
</div>
<p class=mt-2>Fetching user details...</p>
</div>
<div id=user-details></div>
<button onclick=logout() class=logout-btn>
<i class="bi bi-box-arrow-right"></i> Logout
</button>
</div>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js></script>
<script src=https://unpkg.com/aos@2.3.4/dist/aos.js></script>
<script>AOS.init();const API_URL="https://script.google.com/macros/s/AKfycbxRDPYWaN_jexaIXM1RGLd51hrgrlcpkWvREGeW2wJbp8sku-Ht82OQLgvW_gO8Pbi5/exec",loader=document.getElementById("loader"),userDetailsDiv=document.getElementById("user-details"),customerMail=localStorage.getItem("customer_mail"),customerName=localStorage.getItem("customer_name"),customerNo=localStorage.getItem("customer_no"),userData=JSON.parse(localStorage.getItem("user_data"))||{},email=customerMail||userData.email,name=customerName||userData.name,contact=customerNo||userData.contact,picture=userData.picture||"https://via.placeholder.com/150";async function fetchUserDetails(e){try{const t=await fetch(`${API_URL}?action=fetchUser&email=${encodeURIComponent(e)}`),a=await t.json();loader.style.display="none",a.id?userDetailsDiv.innerHTML=`\n            <div class="alert alert-light mt-3">\n              <strong>User Details:</strong><br>\n              ID: ${a.id}<br>\n              Name: ${a.name}<br>\n              Email: ${a.email}<br>\n              Contact: ${a.contact}<br>\n            </div>`:userDetailsDiv.innerHTML='<div class="alert alert-danger mt-3">No user details found.</div>'}catch(e){loader.style.display="none",userDetailsDiv.innerHTML='<div class="alert alert-danger mt-3">Error fetching details. Try again later.</div>',console.error(e)}}function logout(){localStorage.clear(),alert("Logged out successfully!"),window.location.reload()}email?(document.getElementById("profile-picture").src=picture,document.getElementById("profile-name").innerText=name||"N/A",document.getElementById("profile-email").innerText="Email: "+(email||"N/A"),document.getElementById("profile-contact").innerText="Contact: "+(contact||"N/A"),fetchUserDetails(email)):window.location.replace("https://easanmart.netlify.app/easan_login.html")</script>
</body>
</html>
